(()=>{"use strict";var e={1115:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var a=n(314),o=n(4485),r=n(7137),l=n(7568),s=n(2535),c=n(3151),i=n(8798),d=n(8033),u=n(5362),p=n(7730);function h(){const[e,t]=(0,a.useState)(""),[n,c]=(0,a.useState)(""),[h,g]=(0,a.useState)(""),[m,y]=(0,a.useState)(""),[x,v]=(0,a.useState)("University of Algiers Ben Youssef Ben Khadda"),[C,j]=(0,a.useState)("Faculte de Medecine"),[b,w]=(0,a.useState)("Medecine"),[P,S]=(0,a.useState)(""),[T,k]=(0,a.useState)(""),[A,R]=(0,a.useState)(""),[I,U]=(0,a.useState)(""),[O,M]=(0,a.useState)(!1),[$,F]=(0,a.useState)(!1),[B,D]=(0,a.useState)(null),[L,V]=(0,a.useState)(!1),_=async e=>{try{const t=await fetch("http://localhost/CARAMA/qr_process.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`qrData=${encodeURIComponent(e)}`}),n=await t.json();U(n.message||"Data sent successfully.")}catch(t){U("Failed to send QR data. Please try again.")}};return(0,p.jsxs)(o.default,{style:f.container,children:[$?null:(0,p.jsxs)(p.Fragment,{children:[O&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(r.default,{placeholder:"First name",value:e,onChangeText:t,style:f.input}),(0,p.jsx)(r.default,{placeholder:"Second name",value:n,onChangeText:c,style:f.input}),(0,p.jsx)(r.default,{placeholder:"Year",value:h,onChangeText:g,style:f.input}),(0,p.jsx)(r.default,{placeholder:"Group",value:m,onChangeText:y,style:f.input})]}),(0,p.jsx)(r.default,{placeholder:"Email",value:P,onChangeText:S,style:f.input,keyboardType:"email-address",autoCapitalize:"none"}),(0,p.jsx)(r.default,{placeholder:"Password",secureTextEntry:!0,value:T,onChangeText:k,style:f.input}),O&&(0,p.jsx)(r.default,{placeholder:"Confirm Password",secureTextEntry:!0,value:A,onChangeText:R,style:f.input}),O&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(d.Picker,{selectedValue:x,onValueChange:v,style:f.picker,children:(0,p.jsx)(d.Picker.Item,{label:"University of Algiers Ben Youssef Ben Khadda",value:"University of Algiers Ben Youssef Ben Khadda"})}),(0,p.jsx)(d.Picker,{selectedValue:C,onValueChange:j,style:f.picker,children:(0,p.jsx)(d.Picker.Item,{label:"Faculte de Medecine",value:"Faculte de Medecine"})}),(0,p.jsxs)(d.Picker,{selectedValue:b,onValueChange:w,style:f.picker,children:[(0,p.jsx)(d.Picker.Item,{label:"Medecine",value:"Medecine"}),(0,p.jsx)(d.Picker.Item,{label:"Medecine Dentaire",value:"Medecine Dentaire"}),(0,p.jsx)(d.Picker.Item,{label:"Pharmacie",value:"Pharmacie"})]})]}),(0,p.jsx)(l.default,{title:O?"Sign Up":"Login",onPress:O?async()=>{if(T===A)try{const t=await fetch("http://localhost/CARAMA/signup.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`firstname=${encodeURIComponent(e)}&secondname=${encodeURIComponent(n)}&year=${encodeURIComponent(h)}&groupe=${encodeURIComponent(m)}&university=${encodeURIComponent(x)}&faculty=${encodeURIComponent(C)}&department=${encodeURIComponent(b)}&email=${encodeURIComponent(P)}&password=${encodeURIComponent(T)}`}),a=await t.json();U(a.message||"An unexpected error occurred.")}catch(t){U("An error occurred. Please try again later.")}else U("Passwords do not match.")}:async()=>{try{const e=await fetch("http://localhost/CARAMA/login.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`email=${encodeURIComponent(P)}&password=${encodeURIComponent(T)}`});if(!e.ok)return void U("Login request failed. Please try again.");const t=await e.json();U(t.message||"An unexpected error occurred."),"Login successful!"===t.message&&(F(!0),V(!0))}catch(e){U("An error occurred. Please try again later.")}}}),(0,p.jsxs)(s.default,{style:f.toggleText,children:[O?"Already have an account? ":"Don't have an account? ",(0,p.jsx)(s.default,{style:f.toggleLink,onPress:()=>M(!O),children:O?"Login":"Sign Up"})]})]}),L&&(0,p.jsx)(u.RNCamera,{style:f.camera,onBarCodeRead:({data:e})=>{V(!1),D(e),i.default.alert("QR Code Found",`Data: ${e}`,[{text:"Confirm",onPress:()=>_(e)},{text:"Cancel",style:"cancel",onPress:()=>V(!0)}])},captureAudio:!1}),I&&(0,p.jsx)(s.default,{style:f.message,children:I})]})}const f=c.default.create({container:{padding:20},input:{height:40,borderColor:"#ccc",borderWidth:1,marginBottom:10,paddingHorizontal:10},picker:{height:50,borderColor:"#ccc",borderWidth:1,marginBottom:10},toggleText:{marginTop:10,textAlign:"center"},toggleLink:{color:"blue",fontWeight:"bold"},message:{marginTop:10,color:"red",textAlign:"center"},camera:{flex:1,justifyContent:"flex-end",alignItems:"center"}})}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}n.m=e,(()=>{var e=[];n.O=(t,a,o,r)=>{if(!a){var l=1/0;for(d=0;d<e.length;d++){for(var[a,o,r]=e[d],s=!0,c=0;c<a.length;c++)(!1&r||l>=r)&&Object.keys(n.O).every((e=>n.O[e](a[c])))?a.splice(c--,1):(s=!1,r<l&&(l=r));if(s){e.splice(d--,1);var i=o();void 0!==i&&(t=i)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[a,o,r]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={792:0};n.O.j=t=>0===e[t];var t=(t,a)=>{var o,r,[l,s,c]=a,i=0;if(l.some((t=>0!==e[t]))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(c)var d=c(n)}for(t&&t(a);i<l.length;i++)r=l[i],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(d)},a=self.webpackChunkweb=self.webpackChunkweb||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a=n.O(void 0,[314],(()=>n(7977)));a=n.O(a)})();
//# sourceMappingURL=main.2ce14fd0.js.map